<!doctype html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>GeyserMC Wiki: Issues</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/darcula.css">

	<meta name="author" content="GeyserMC">
	<meta name="description" content="This is the wiki for all of GeyserMC's projects.">
	<meta name="theme-color" content="#2b3035">

	<meta property="og:type" content="website">
	<meta property="og:url" content="http://localhost:4000">
	<meta property="og:title" content="GeyserMC Wiki: Issues">
	<meta property="og:description" content="This is the wiki for all of GeyserMC's projects.">
	<meta property="og:image" content="/android-chrome-192x192.png">

	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<link rel="icon" type="image/x-icon" href="/favicon.ico">

	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#248f00">
  </head>
  <body>
	<header>
		<nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
			<div class="container-fluid">
				<a class="navbar-brand" href="/"><img src="/android-chrome-512x512.png" alt="geyser logo" height="32"> GeyserMC Wiki</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarLinks" aria-controls="navbarLinks" aria-expanded="false" aria-label="Toggle navigation">
				  <span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarLinks">
					<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link" href="https://geysermc.org/"><i class="bi bi-house pe-1"></i> Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="https://geysermc.org/download"><i class="bi bi-download pe-1"></i> Download</a>
						</li>
					</ul>
					<form class="d-flex" role="search" action="/search/">
						<div class="input-group">
							<button class="btn btn-outline-secondary" type="submit" id="button-search"><i class="bi bi-search"></i></button>
							<input type="text" name="q" class="form-control" placeholder="Search the site..." aria-label="Search the site..." aria-describedby="button-search">
						</div>
					</form>
				</div>
			</div>
		</nav>
	</header>
	<div id="page-content" class="container-fluid">
		<div class="row">
			<div class="col-12 col-md-3 col-xl-2">
				<div class="sticky-top">
					<div class="sidebar py-2 text-break">
						<nav class="navbar navbar-expand-md">
	<div class="container-fluid">
		<div class="d-block d-md-none">Wiki Navigation</div>
		<button class="navbar-toggler mb-2" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarNav" aria-controls="sidebarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse flex-column align-items-start" id="sidebarNav">




			<div class="nav-item dropdown">
				<a class="nav-link dropdown-toggle fw-bold" href="#" role="button" data-bs-toggle="dropdown" data-bs-auto-close="false" aria-expanded="false">Geyser Documentation</a>
				<ul class="pe-3 pt-0 dropdown-menu position-relative border-0 list-disc">

						<li class="ms-4">
							<a href="/geyser/setup/">Setting up Geyser</a>

								<ul>

										<li>
											<a href="/geyser/supported-hosting-providers/">Supported Hosting Providers</a>
										</li>

										<li>
											<a href="/geyser/using-geyser-with-consoles/">Using Geyser with Consoles</a>
										</li>

										<li>
											<a href="/geyser/playit-gg/">Using playit.gg with Geyser</a>
										</li>

										<li>
											<a href="/geyser/creating-a-startup-script/">Creating a Startup Script</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/common-issues/">Common Issues</a>

								<ul>

										<li>
											<a href="/geyser/fixing-unable-to-connect-to-world/">Fixing 'Unable to Connect to World'</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/understanding-the-config/">Configuring Geyser</a>

								<ul>

										<li>
											<a href="/geyser/commands/">Commands</a>
										</li>

										<li>
											<a href="/geyser/geyser-command-line-arguments-and-system-properties/">Geyser Command Line Arguments and System Properties</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/faq/">FAQ</a>

								<ul>

										<li>
											<a href="/geyser/anticheat-compatibility/">Anticheat Compatibility</a>
										</li>

										<li>
											<a href="/geyser/current-limitations/">Current Limitations</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/custom-items/">Custom items with Geyser</a>

								<ul>

										<li>
											<a href="/geyser/custom-items/#json-mappings">JSON mappings</a>
										</li>

										<li>
											<a href="/geyser/custom-items/#geyser-extensions">Geyser extensions</a>
										</li>

										<li>
											<a href="/geyser/custom-items/#resource-pack">Resource pack</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/custom-blocks/">Custom blocks with Geyser</a>

								<ul>

										<li>
											<a href="/geyser/custom-blocks/#enabling-custom-blocks">Enabling custom blocks</a>
										</li>

										<li>
											<a href="/geyser/custom-blocks/#json-mappings">JSON mappings</a>
										</li>

										<li>
											<a href="/geyser/custom-blocks/#geyser-extensions">Geyser extensions</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/custom-skulls/">Custom skulls with Geyser</a>

								<ul>

										<li>
											<a href="/geyser/custom-skulls/#enabling-custom-skulls">Enabling custom skulls</a>
										</li>

										<li>
											<a href="/geyser/custom-skulls/#custom-skullsyml">custom-skulls.yml</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/api/">Geyser API</a>

								<ul>

										<li>
											<a href="/geyser/getting-started-with-the-api/">Getting Started</a>
										</li>

										<li>
											<a href="/geyser/api/#short-overview-of-the-geyser-api">Overview</a>
										</li>

										<li>
											<a href="/geyser/events/">Events</a>
										</li>

										<li>
											<a href="/geyser/forms/">Forms and Cumulus</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/extensions/">Geyser Extensions</a>

								<ul>

										<li>
											<a href="/geyser/extensions/#creating-the-main-class">Main class</a>
										</li>

										<li>
											<a href="/geyser/extensions/#creating-commands-with-geyser-extensions">Creating Commands</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/geyser/global-api/">Global API</a>

						</li>

				</ul>
			</div>




			<div class="nav-item dropdown">
				<a class="nav-link dropdown-toggle fw-bold show" href="#" role="button" data-bs-toggle="dropdown" data-bs-auto-close="false" aria-expanded="false">Floodgate Documentation</a>
				<ul class="pe-3 pt-0 dropdown-menu position-relative border-0 list-disc show">

						<li class="ms-4">
							<a href="/floodgate/setup/">Setup</a>

						</li>

						<li class="ms-4">
							<a href="/floodgate/issues/">Issues</a>

						</li>

						<li class="ms-4">
							<a href="/floodgate/faq/">FAQ</a>

						</li>

						<li class="ms-4">
							<a href="/floodgate/features/">Features</a>

								<ul>

										<li>
											<a href="/floodgate/features/#whitelist-command">Whitelist command</a>
										</li>

										<li>
											<a href="/floodgate/commands/">Commands</a>
										</li>

										<li>
											<a href="/floodgate/features/#what-is-skin-uploading">Skin Uploading</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/floodgate/api/">Floodgate API</a>

								<ul>

										<li>
											<a href="/floodgate/player/">FloodgatePlayer</a>
										</li>

										<li>
											<a href="/geyser/forms/">Forms and Cumulus</a>
										</li>

								</ul>

						</li>

						<li class="ms-4">
							<a href="/floodgate/linking/">Linking</a>

								<ul>

										<li>
											<a href="/floodgate/linking/#what-is-global-linking">Global Linking</a>
										</li>

										<li>
											<a href="/floodgate/linking/#local-linking">Local Linking</a>
										</li>

								</ul>

						</li>

				</ul>
			</div>




			<div class="nav-item dropdown">
				<a class="nav-link dropdown-toggle fw-bold" href="#" role="button" data-bs-toggle="dropdown" data-bs-auto-close="false" aria-expanded="false">Other</a>
				<ul class="pe-3 pt-0 dropdown-menu position-relative border-0 list-disc">

						<li class="ms-4">
							<a href="/other/geyseroptionalpack/">GeyserOptionalPack</a>

						</li>

						<li class="ms-4">
							<a href="/other/hurricane/">Hurricane</a>

						</li>

						<li class="ms-4">
							<a href="/other/geyserconnect/">GeyserConnect</a>

						</li>

						<li class="ms-4">
							<a href="/other/community-geyser-projects/">Community Geyser Projects</a>

						</li>

						<li class="ms-4">
							<a href="/other/test-server/">Test Server</a>

						</li>

						<li class="ms-4">
							<a href="/other/developer-guide/">Developer Guide</a>

						</li>

						<li class="ms-4">
							<a href="/other/discord-bot-usage/">Geyser Discord Bot Usage</a>

						</li>

				</ul>
			</div>

		</div>
	</div>
</nav>
					</div>
				</div>
			</div>
			<main class="col-12 col-md-9 col-xl-8" role="main">
				<nav aria-label="breadcrumb">
    <ol class="breadcrumb">




                <li class="breadcrumb-item"><a href="http://localhost:4000/floodgate/">Floodgate</a></li>




                <li class="breadcrumb-item active" aria-current="page">Issues</li>


    </ol>
</nav>

<h1 id="known-issues--caveats">Known Issues &amp; Caveats</h1>
<p>If an issue you’re experiencing is not listed here, please consider joining the Geyser <a href="http://discord.geysermc.org/">Discord</a>.</p>

<h2 id="running-commands">Running commands</h2>
<p>In some instances, like if you have the <code class="language-plaintext highlighter-rouge">username-prefix</code> set to <code class="language-plaintext highlighter-rouge">*</code>, you may need to wrap the Bedrock player’s username in quotes; for example: <code class="language-plaintext highlighter-rouge">/tp "*BedrockPlayer"</code>. Setting the prefix to <code class="language-plaintext highlighter-rouge">.</code> should also fix this.</p>

<h2 id="if-you-wish-to-use-ip-forwarding-please-enable-it-in-your-bungeecord-config-as-well">If you wish to use IP forwarding, please enable it in your BungeeCord config as well!</h2>
<p>It is likely you have enabled <code class="language-plaintext highlighter-rouge">send-floodgate-data</code> in your Floodgate config but either Floodgate isn’t installed on the target server, or your floodgate key isn’t the same between the installs of the plugin (please copy them so they all use the same key).</p>

<h2 id="javalangillegalstateexception-cannot-reply-to-encryptionrequestpacket-without-profile-and-access-token"><code class="language-plaintext highlighter-rouge">java.lang.IllegalStateException: Cannot reply to EncryptionRequestPacket without profile and access token.</code></h2>

<p>Make sure the server has Floodgate installed and started up correctly. Otherwise, see if the next line fixes your error.</p>

<h2 id="javaxcryptoaeadbadtagexception-tag-mismatch"><code class="language-plaintext highlighter-rouge">javax.crypto.AEADBadTagException: Tag mismatch!</code></h2>

<p>If Geyser and Floodgate are on the same server, shut down your server, delete the <code class="language-plaintext highlighter-rouge">floodgate</code> plugin folder, delete any key file in the Geyser folder, and restart your server.
If Geyser and Floodgate are not on the same server and you had to copy the key file, this could also be an error related to uploading through FTP. Using ASCII will not work here, and you need to make sure you’re on binary when uploading. We recommend using <a href="https://winscp.net">WinSCP</a> if you need to use FTP.</p>

<h2 id="javalangnumberformatexception-for-input-string-">java.lang.NumberFormatException: For input string: “”</h2>

<p>You’re trying to log in without an Xbox account. Floodgate requires an Xbox account to authenticate the Bedrock player.</p>

<h2 id="geyser-floodgate51777-lost-connection-internal-exception-javalangnumberformatexception-for-input-string-sfqdxv36-or-a-similar-error">Geyser-Floodgate:51777 lost connection: Internal Exception: java.lang.NumberFormatException: For input string: “SfqdXv36” (or a similar error)</h2>

<p>Set <code class="language-plaintext highlighter-rouge">ip-forwarding</code> in your BungeeCord to <code class="language-plaintext highlighter-rouge">true</code>.</p>

<h2 id="please-connect-through-the-official-geyser-disconnect-message">“Please connect through the official Geyser” disconnect message</h2>

<p>Ensure that Floodgate and Geyser are both up-to-date.</p>

<h2 id="prefix-is-not-changing-on-the-server-after-changing-it-in-the-config">Prefix is not changing on the server after changing it in the config.</h2>

<p>Between the Paper builds of 1.15.2-355 and 1.16.5-505, there was a bug where Floodgate players who had already connected to the server would not have their prefixed changed. Paper builds 1.16.5-506 and later fix this issue.</p>

<p>Ensure that you removed the <code class="language-plaintext highlighter-rouge">usercache.json</code> file from the server root directory and restart your server.</p>

<h2 id="issues-with-luckperms-and-prefixes">Issues with LuckPerms and prefixes</h2>

<p>Set <code class="language-plaintext highlighter-rouge">allow-invalid-usernames</code> to <code class="language-plaintext highlighter-rouge">true</code> in LuckPerms’ config.</p>

<h2 id="failed-to-verify-username-with-paper">Failed to verify username! (with Paper)</h2>

<p>To completely mitigate this issue, disable <code class="language-plaintext highlighter-rouge">perform-username-validation</code> in the <a href="https://paper.readthedocs.io/en/latest/server/configuration.html#unsupported_settings">unsupported settings of the <code class="language-plaintext highlighter-rouge">config/paper-global.yml</code> file</a> (<code class="language-plaintext highlighter-rouge">paper.yml</code> in the root server folder on servers below 1.19). Using Floodgate on the backend servers will also mitigate this issue.</p>

<h2 id="error-with-forge-or-fabric-bukkit-hybrid">Error with Forge or Fabric Bukkit Hybrid</h2>

<p>At this time, there is no way to run Floodgate on servers that mix Forge and Bukkit or Fabric and Bukkit (For example: Magma, Mohist, and Cardboard/Bukkit4Fabric) - most hybrids do not support the complicated procedures we need to do in order to allow Bedrock players to connect (for the technically minded: these server softwares typically don’t support NMS).</p>

<p>If you wish to use Floodgate in combination with hybrid servers, we recommend putting these servers behind a BungeeCord or Velocity proxy, and running Floodgate on the proxy.</p>

<h2 id="after-enabling-global-linking-in-offline-mode-player-data-is-not-synced-between-java-and-bedrock-players">After enabling global linking in offline mode, player data is not synced between Java and Bedrock players.</h2>

<p>This occurs in offline mode because the UUID of the Java account linked to the Bedrock account does not match the online mode UUID returned by Floodgate’s global linking server.</p>

<p>When using global linking, ensure <code class="language-plaintext highlighter-rouge">online-mode</code> in <code class="language-plaintext highlighter-rouge">server.properties</code> is set to <code class="language-plaintext highlighter-rouge">true</code>. Otherwise, Bedrock players will not be authenticated with the same UUID they receive when playing on Java Edition, resulting in lost progress. This does not occur with local linking.</p>


			</main>
			<div class="col-2 d-none d-xl-block">
				<div class="sticky-top">
					<div class="sidebar py-2">
						<a class="d-block text-decoration-none" href="https://github.com/GeyserMC/GeyserWiki/edit/master/_docs/floodgate/issues.md" target="_blank"><i class="bi bi-pencil"></i> Edit this page</a>
<a class="d-block text-decoration-none" href="https://github.com/GeyserMC/GeyserWiki/issues/new?labels=question&title=Question:&body=Question on: _docs/floodgate/issues.md" target="_blank"><i class="bi bi-github"></i> Create Wiki issue/bug report</a>
<a class="d-block text-decoration-none" href="/issues/new" target="_blank"><i class="bi bi-list-check"></i> Create Geyser issue/bug report</a>

<div id="page-nav" class="py-3 "></div>

					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- <footer class="p-4 text-center bg-body-tertiary">
		&copy; 2023 GeyserMC
	</footer> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
	<script src="/js/page-nav.js"></script>
  </body>
</html>
